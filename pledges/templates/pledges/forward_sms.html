{% extends 'pledges/base.html' %}

{% block title %}Forward SMS - {{ record.name }}{% endblock %}

{% block content %}
<!-- Header Section -->
<div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0">
        <div>
            <h1 class="text-3xl font-bold text-gray-900">Forward SMS</h1>
            <p class="text-gray-600 mt-1 flex items-center">
                <i class="fas fa-share mr-2"></i>
                Send SMS notification to a different number for {{ record.name }}
            </p>
        </div>
        <div class="flex space-x-3">
            <a href="{% url 'edit_record' record.id %}" class="inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>
                Back to Edit
            </a>
        </div>
    </div>
</div>

<!-- Forward Form -->
<div class="max-w-2xl mx-auto">
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6">
        <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
            <div class="flex items-center">
                <div class="bg-blue-100 rounded-full p-2 mr-3">
                    <i class="fas fa-info-circle text-blue-600"></i>
                </div>
                <div>
                    <h3 class="text-sm font-semibold text-blue-900">Original Guest Information</h3>
                    <p class="text-sm text-blue-800">
                        <strong>{{ record.name }}</strong> - {{ record.mobile_number }}<br>
                        Card: {{ record.card_code }} | 
                        {% if record.card_capacity == 2 %}Double Capacity
                        {% elif record.card_capacity == 1 %}Single Capacity
                        {% else %}No Access{% endif %}
                    </p>
                </div>
            </div>
        </div>

        <form method="post" class="space-y-6">
            {% csrf_token %}
            
            <div>
                <label for="{{ form.recipient_number.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                    <i class="fas fa-phone mr-2 text-gray-400"></i>Forward to Phone Number *
                </label>
                {{ form.recipient_number }}
                {% if form.recipient_number.errors %}
                    <div class="mt-1 text-sm text-red-600">
                        {% for error in form.recipient_number.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% else %}
                    <p class="mt-1 text-xs text-gray-500">{{ form.recipient_number.help_text }}</p>
                {% endif %}
            </div>
            
            <div>
                <label for="{{ form.recipient_name.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                    <i class="fas fa-user mr-2 text-gray-400"></i>Recipient Name (Optional)
                </label>
                {{ form.recipient_name }}
                {% if form.recipient_name.errors %}
                    <div class="mt-1 text-sm text-red-600">
                        {% for error in form.recipient_name.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% else %}
                    <p class="mt-1 text-xs text-gray-500">{{ form.recipient_name.help_text }}</p>
                {% endif %}
            </div>
            
            <div>
                <label for="{{ form.custom_message.id_for_label }}" class="block text-sm font-medium text-gray-700 mb-2">
                    <i class="fas fa-comment mr-2 text-gray-400"></i>Custom Message (Optional)
                </label>
                {{ form.custom_message }}
                {% if form.custom_message.errors %}
                    <div class="mt-1 text-sm text-red-600">
                        {% for error in form.custom_message.errors %}
                            <p>{{ error }}</p>
                        {% endfor %}
                    </div>
                {% else %}
                    <p class="mt-1 text-xs text-gray-500">{{ form.custom_message.help_text }}</p>
                {% endif %}
            </div>
            
            <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="text-sm font-semibold text-gray-700 mb-2">Default Message Preview:</h4>
                <div class="text-sm text-gray-600 font-mono bg-white p-3 rounded border">
                    Karibu {{ record.name }}! Your wedding card code is {{ record.card_code }}. 
                    {% if record.card_capacity == 2 %}Idadi: Double{% elif record.card_capacity == 1 %}Idadi: Single{% else %}Idadi: {{ record.card_capacity }}{% endif %}.
                </div>
                <p class="text-xs text-gray-500 mt-2">This message will be sent if you don't provide a custom message above.</p>
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-3 pt-6 border-t border-gray-200">
                <a href="{% url 'edit_record' record.id %}" class="inline-flex items-center justify-center px-6 py-3 border border-gray-300 text-gray-700 bg-white rounded-md hover:bg-gray-50 transition-colors">
                    <i class="fas fa-times mr-2"></i>
                    Cancel
                </a>
                <button type="submit" class="inline-flex items-center justify-center px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">
                    <i class="fas fa-share mr-2"></i>
                    Forward SMS
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}